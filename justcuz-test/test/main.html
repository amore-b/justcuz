<!DOCTYPE html>
<!--add source link-->
<html>
<head>
  <!-- Standard Meta -->
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  <!-- Site Properties -->
  <title>Stuff 'n Things</title>

  <!-- replaced sample page links with CDN from https://cdnjs.com/libraries/-->

  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.6/components/reset.min.css">
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.6/components/site.min.css">

  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.6/components/container.min.css">
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.6/components/grid.min.css">
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.6/components/header.min.css">
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.6/components/image.min.css">
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.6/components/menu.min.css">

  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.6/components/divider.min.css">
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.6/components/list.min.css">
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.6/components/segment.min.css">
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.6/components/dropdown.min.css">
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.6/components/icon.min.css">
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.6/components/transition.min.css">
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.6/components/button.min.css">
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.6/components/modal.min.css">
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.6/components/dimmer.min.css">  
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.6/components/form.min.css">
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.6/components/input.min.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.6/components/transition.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.6/components/dropdown.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.6/components/visibility.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.6/components/modal.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.6/components/dimmer.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.6/components/form.min.js"></script>  

  <script>
  $(document)
    .ready(function() {
      // fix main menu to page on passing
      $('.main.menu').visibility({
        type: 'fixed'
      });
      $('.overlay').visibility({
        type: 'fixed',
        offset: 80
      });
      // lazy load images
      $('.image').visibility({
        type: 'image',
        transition: 'vertical flip in',
        duration: 500
      });
      // show dropdown on hover
      $('.main.menu  .ui.dropdown').dropdown({
        on: 'hover'
      });

      function drawTable(data){
        console.log("IN DRAW TABLE");
        if (data.length != undefined){
            var table = $("<table>");
          for (var i=0; i< data.length; i++){
          
          $('#catalog').html(drawRow(data[i]));
          }
        }
        else{console.log("amore broke it");}
      }

      function drawRow(rowData){
      var row= $("<tr />")
      //$("#catalog").append(row);
      row.append($("<td>" + rowData.COLOR + "</td>"));
      row.append($("<td>" + rowData.COMPANY_NAME + "</td>"));
      row.append($("<td>" + rowData.GENDER + "</td>"));
      row.append($("<td>" + rowData.ITEM_NUM + "</td>"));
      row.append($("<td>" + rowData.PRICE + "</td>"));
      row.append($("<td>" + rowData.TYPE + "</td>"));
      return row;
      }

      $(function() {
          $('.ui.right.floated.dropdown').dropdown({
            onChange: function(value) {
              console.log(value);
              $.ajax({
                url: "index7.php/merchandise/" + value,
                success: function(result) {
                    console.log(result);
                    //$('#catalog').html(result);
                    drawTable(result);
                },
                error: function() {
                    console.log("nope");
                }
              })
            }
          });
      });

      $('#loginButton').click(
        function() {
          $('#loginModal').modal('show');
        });
      
      $('#loginForm')
        .form({
          fields: {
            email: {
              identifier  : 'email',
              rules: [
                {
                  type   : 'empty',
                  prompt : 'Please enter your e-mail'
                },
                {
                  type   : 'email',
                  prompt : 'Please enter a valid e-mail'
                }
              ]
            },
            password: {
              identifier  : 'password',
              rules: [
                {
                  type   : 'empty',
                  prompt : 'Please enter your password'
                },
                {
                  type   : 'length[6]',
                  prompt : 'Your password must be at least 6 characters'
                }
              ]
            }
          }

        });

        $('#loginForm').submit(function(e) {
          e.preventDefault();
          
          if($('#loginForm').form('is valid')) {
            var values = {};
            $.each($('#loginForm').serializeArray(), function(i, field) {
                values[field.name] = field.value;
            });

            $.ajax({
              url: "index7.php/users/login",
              type: 'post',
              data: values,
              success: function(result) {
                $('#loginModal').modal('hide');
                $('#loginButton').replaceWith("<i class='user icon'></icon>");
                //todo: error case
              }
            })
          }
        })
    })
  ;
  </script>

  <style type="text/css">
  body {
    background-color: #FFFFFF;
  }
  .main.container {
    margin-top: 2em;
  }
  .main.menu {
    margin-top: 4em;
    border-radius: 0;
    border: none;
    box-shadow: none;
    transition:
      box-shadow 0.5s ease,
      padding 0.5s ease
    ;
  }
  .main.menu .item img.logo {
    margin-right: 1.5em;
  }
  .overlay {
    float: left;
    margin: 0em 3em 1em 0em;
  }
  .overlay .menu {
    position: relative;
    left: 0;
    transition: left 0.5s ease;
  }
  .main.menu.fixed {
    background-color: #FFFFFF;
    border: 1px solid #DDD;
    box-shadow: 0px 3px 5px rgba(0, 0, 0, 0.2);
  }
  .overlay.fixed .menu {
    left: 800px;
  }
  .text.container .left.floated.image {
    margin: 2em 2em 2em -4em;
  }
  .text.container .right.floated.image {
    margin: 2em -4em 2em 2em;
  }
  .ui.footer.segment {
    margin: 5em 0em 0em;
    padding: 5em 0em;
  }
  .ui.segment {
    box-shadow: 0px 0px 0px rgba(0, 0, 0, 0);
    border: 0px;
  }
  .ui.stacked.segment {
    box-shadow: 0px 0px 0px rgba(0, 0, 0, 0);
  }
  .ui.stacked.segment:after {
    border-top: 0px;
    height: 0;
  }
  .ui.error.message {
    text-align: left;
  }
  </style>

</head>
<body>

  <div class="ui main text container">
    <h1 class="ui header">Stuff n' Things</h1>
  </div>


  <div class="ui borderless main menu">
    <div class="ui text container">
      <div href="#" class="header item">
        <img class="logo" src="assets/images/logo.png">
        Stuff n' Things
      </div>
      <a href="#" class="item">Blog</a>
      <a href="#" class="item">Articles</a>
      <a href="#" class="ui right floated dropdown item">
        Itemz <i class="dropdown icon"></i>
        <div class="menu">
          <div class="item">
            <i class="dropdown icon"></i>
            Shirt
            <div class ="menu">
	      <div class="item">All</div>
              <div class="item">Price</div>
              <div class="item">Gender</div>
              <div class="item">Color</div>
              <div class="item">Company</div>
            </div>
          </div>
	  <div class="item">
            <i class="dropdown icon"></i>
            Jeans
            <div class ="menu">
              <div class="item">All</div>
              <div class="item">Price</div>
              <div class="item">Gender</div>
              <div class="item">Color</div>
              <div class="item">Company</div>
            </div>
          </div>
	  <div class="item">
            <i class="dropdown icon"></i>
            Purse
            <div class ="menu">
              <div class="item">All</div>
              <div class="item">Price</div>
              <div class="item">Gender</div>
              <div class="item">Color</div>
              <div class="item">Company</div>
            </div>
          </div>
	  <div class="item">
            <i class="dropdown icon"></i>
            Shoes
            <div class ="menu">
              <div class="item">All</div>
              <div class="item">Price</div>
              <div class="item">Gender</div>
              <div class="item">Color</div>
              <div class="item">Company</div>
            </div>
          </div>
	  <div class="item">
            <i class="dropdown icon"></i>
            Sweater
            <div class ="menu">
              <div class="item">All</div>
              <div class="item">Price</div>
              <div class="item">Gender</div>
              <div class="item">Color</div>
              <div class="item">Company</div>
            </div>
          </div>
        </div>
      </a>
      <button class="ui black basic button" id="loginButton">Log in</button>
    </div>
  </div>

  <div class="ui text container" id="catalog"></div>

  <div class="ui inverted vertical footer segment">
    <div class="ui center aligned container">
      <div class="ui stackable inverted divided grid">
        <div class="three wide column">
          <h4 class="ui inverted header">Group 1</h4>
          <div class="ui inverted link list">
            <a href="#" class="item">Link One</a>
            <a href="#" class="item">Link Two</a>
            <a href="#" class="item">Link Three</a>
            <a href="#" class="item">Link Four</a>
          </div>
        </div>
        <div class="three wide column">
          <h4 class="ui inverted header">Group 2</h4>
          <div class="ui inverted link list">
            <a href="#" class="item">Link One</a>
            <a href="#" class="item">Link Two</a>
            <a href="#" class="item">Link Three</a>
            <a href="#" class="item">Link Four</a>
          </div>
        </div>
        <div class="three wide column">
          <h4 class="ui inverted header">Group 3</h4>
          <div class="ui inverted link list">
            <a href="#" class="item">Link One</a>
            <a href="#" class="item">Link Two</a>
            <a href="#" class="item">Link Three</a>
            <a href="#" class="item">Link Four</a>
          </div>
        </div>
        <div class="seven wide column">
          <h4 class="ui inverted header">Footer Header</h4>
          <p>Extra space for a call to action inside the footer that could help re-engage users.</p>
        </div>
      </div>
      <div class="ui inverted section divider"></div>
      <img src="assets/images/logo.png" class="ui centered mini image">
      <div class="ui horizontal inverted small divided link list">
        <a class="item" href="#">Site Map</a>
        <a class="item" href="#">Contact Us</a>
        <a class="item" href="#">Terms and Conditions</a>
        <a class="item" href="#">Privacy Policy</a>
      </div>
    </div>
  </div>
  <div class="ui modal" id="loginModal">
  <i class="close icon"></i>
  <div class="header">
    <div class="ui middle aligned center aligned grid">
    <div class="column">
      <h2 class="ui teal header">
        <div class="content">
          Log in to your account
        </div>
      </h2>
    </div>
  </div>
  </div>
<div class="ui middle aligned center aligned grid">
  <div class="column">
    <form class="ui large form" id="loginForm" > <!--action="index7.php/users/login" method="post"-->

      <!--div class="two wide column"-->
      <div class="ui stacked segment">
        <div class="field">
          <div class="ui left icon input">
            <i class="user icon"></i>
            <input type="text" name="email" placeholder="E-mail address">
          </div>
        </div>
        <div class="field">
          <div class="ui left icon input">
            <i class="lock icon"></i>
            <input type="password" name="password" placeholder="Password">
          </div>
        </div>
      <div class="ui error message"></div>
    <!--div class="ui button">Cancel</div-->
    <div class="ui teal submit button">Log in</div>
        
      </div>


    <!--/div-->

    </form>



  

  </div>

</div>


    <div class="actions">
      <div class="ui middle aligned center aligned grid">
      <div class="ui message">
        New to us? <a href="#">Sign Up</a>
      </div>
    </div>
    </div>
  </div>
</body>
